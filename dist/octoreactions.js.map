{"version":3,"sources":["Parser.js","Constants.js","Async.js","Views.js","Octoreactions.js","index.js"],"names":[],"mappings":"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","file":"octoreactions.js","sourcesContent":["class Parser {\n\n  static parseIssueDetail($dom) {\n    let containers = $dom.find('.comment-reactions-options');\n\n    var plus = 0;\n    containers.each(function (index, container) {\n      var tokens = $(container).find(PLUS_SELECTOR).text().trim().split(' ');\n      return plus += +tokens[tokens.length - 1]\n    })\n\n    return {plus}\n  }\n\n  static getIssues($dom) {\n    let issues = [];\n    $('.table-list-issues li').each((i, issue) => {\n      const $issue = $(issue);\n      const tokens = $issue.find('a').last().attr('href').split('/');\n      issues.push({\n        id: +tokens[tokens.length - 1],\n        $issue\n      })\n    })\n\n    return issues;\n  }\n\n}","const PLUS_SELECTOR = '.reaction-summary-item[value~=\"+1\"]'\nconst MINUS_SELECTOR = '.reaction-summary-item[value~=\"-1\"]'\nconst SMILE_SELECTOR = '.reaction-summary-item[value~=\"smile\"]'\nconst THINKING_SELECTOR = '.reaction-summary-item[value~=\"thinking_face\"]'\nconst TADA_SELECTOR = '.reaction-summary-item[value~=\"tada\"]'\nconst HEART_SELECTOR = '.reaction-summary-item[value~=\"heart\"]'\n\n\nconst REACTION_OPTION_SELECTORS = [\n  PLUS_SELECTOR,\n  MINUS_SELECTOR,\n  SMILE_SELECTOR,\n  THINKING_SELECTOR,\n  TADA_SELECTOR,\n  HEART_SELECTOR\n]\n\nconst OCTOREACTIONS_CLASS = 'Octoreactions';\nconst OCTOREACTIONS_COUNT_CLASS = 'Octoreactions-Count';\nconst OCTOREACTIONS_CONTAINER = '.Octoreactions';\n\nconst GITHUB_PLUS = '<g-emoji class=\"emoji mr-1\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f44d.png\">üëç</g-emoji>'\n\nconst EVENT = {\n  LOCATION_CHANGE: 'octoreactions:location_change'\n}","\nclass Async {\n\n  static getIssueDOM(owner, repo, issueId) {\n    const url = `https://github.com/${owner}/${repo}/issues/${issueId}`\n    return $.get(url)\n  }\n\n}","const ISSUE_HEADER_CONTAINER = '.gh-header-meta'\nconst ISSUE_HEADER_ROW = '.flex-table-item-primary'\n\n\nclass View {\n\n  static getPlusElement(count) {\n    return `\n      <span class=\"${OCTOREACTIONS_CLASS}\">\n        ${GITHUB_PLUS}\n        <span class=\"${OCTOREACTIONS_COUNT_CLASS}\">${count}</span>\n      </span>\n    `\n  }\n\n}\n\nclass IssueDetail extends View {\n\n  static render({plus}) {\n\n    const $issueHeader = $(`${ISSUE_HEADER_CONTAINER} ${ISSUE_HEADER_ROW}`);\n    const $octoreactions = $(OCTOREACTIONS_CONTAINER);\n\n    // TODO: Handle more gracefully if exists\n    $octoreactions.remove();\n\n    $issueHeader.append(View.getPlusElement(plus));\n\n  }\n\n  parse(dom) {\n    var $html = $(dom),\n        containers = $html.find('.comment-reactions-options');\n\n    var pluses = 0;\n    containers.each(function (index, container) {\n      var tokens = $(container).find(PLUS_SELECTOR).text().trim().split(' ');\n      return pluses += +tokens[tokens.length - 1]\n    })\n\n    return pluses;\n  }\n\n  render(plusCount=10) {\n    const tokens = window.location.pathname.split('/');\n    const issueId = tokens[tokens.length - 1]\n    Async.getIssueDOM(STATE.owner, STATE.repo, issueId).then((dom) => {\n      const pluses = this.parse(dom);\n\n      const storage = {};\n      const namespace = `${STATE.owner}/${STATE.repo}`\n      storage[namespace] = {};\n      storage[namespace][issueId] = pluses;\n      chrome.storage.local.set(storage, () => {\n        // debugger;\n      })\n\n      const $issueHeader = $(`${ISSUE_HEADER_CONTAINER} ${ISSUE_HEADER_ROW}`);\n      const $octoreactions = $(OCTOREACTIONS_CONTAINER);\n\n      // TODO: Handle more gracefully if exists\n      $octoreactions.remove();\n\n      $issueHeader.append(this.getPlusElement(pluses));\n    })\n\n\n  }\n\n  shouldRender() {\n    return window.location.pathname.match(/(\\w|\\/)*issues\\/\\d/)\n  }\n\n}\n\nclass IssueList extends View {\n\n  static render({plus}, $issue) {\n    const $commentsContainer = $issue.find('.issue-comments');\n    const octoreactions = $commentsContainer.find(OCTOREACTIONS_CONTAINER);\n\n    octoreactions.remove();\n\n    $commentsContainer.append(View.getPlusElement(plus));\n  }\n\n  getIssues() {\n    return $('.table-list-issues li');\n  }\n\n  getIssueId($issue) {\n    const tokens = $issue.find('a').last().attr('href').split('/');\n    return +tokens[tokens.length - 1];\n  }\n\n  renderCountToIssue($issue, count) {\n    const $commentsContainer = $issue.find('.issue-comments');\n    const octoreactions = $commentsContainer.find(OCTOREACTIONS_CONTAINER);\n\n    octoreactions.remove();\n\n    $commentsContainer.append(this.getPlusElement(count));\n  }\n\n  render() {\n    const issueDetail = new IssueDetail();\n    const $issues = this.getIssues();\n\n    $issues.each((i, issue) => {\n      const $issue = $(issue);\n      const issueId = this.getIssueId($issue);\n\n      Async.getIssueDOM(STATE.owner, STATE.repo, issueId).then(dom => {\n\n        const pluses = issueDetail.parse(dom);\n\n        if (pluses > 0)\n          this.renderCountToIssue($issue, pluses);\n      })\n    })\n\n    console.log('rendering');\n  }\n\n  shouldRender() {\n    return window.location.pathname.endsWith('issues');\n  }\n\n\n}\n","const initialState = {\n  owner: null,\n  repository: null,\n  issueId: null\n}\n\n\nclass Octoreactions {\n\n  constructor(state=initialState, chromeStorage) {\n    this.state = state;\n    this.storage = chromeStorage.local;\n\n    this.updateState();\n    this.render();\n  }\n\n  updateState(pathname=window.location.pathname) {\n    let [_, owner, repo, issues, issueId] = pathname.split('/')\n    this.state = Object.assign({}, this.state, {owner, repo, issueId})\n  }\n\n  render() {\n    const state = this.state;\n    const isIssueList = !state.issueId;\n\n    if (isIssueList) {\n\n      const issues = Parser.getIssues($(document));\n      const {owner, repo} = this.state;\n\n      issues.forEach(({id, $issue}) => {\n        this.getReactionsFromStore(owner, repo, id)\n          .then(r => r, () => Async.getIssueDOM(owner, repo, id)\n            .then(dom => {\n              let reactions = Parser.parseIssueDetail($(dom));\n              this.setReactionsToStore(owner, repo, id, reactions)\n              return jQuery.Deferred().resolve(reactions)\n            })\n          )\n          .then(reactions => IssueList.render(reactions, $issue))\n      })\n\n\n    }\n    else {\n      const {owner, repo, issueId} = this.state;\n      this.getReactionsFromStore(owner, repo, issueId)\n        .then(r => r, () => {\n          let reactions = Parser.parseIssueDetail($(document));\n          this.setReactionsToStore(owner, repo, issueId, reactions)\n          return jQuery.Deferred().resolve(reactions)\n        })\n        .then(reactions => IssueDetail.render(reactions))\n    }\n  }\n\n  getReactionsFromStore(owner, repo, issueId) {\n    const namespace = `${owner}:${repo}`;\n\n    console.log('namespace', namespace);\n    const deferred = jQuery.Deferred();\n    this.storage.get(namespace, (res) => {\n      console.log('Store', res);\n      if (namespace in res && issueId in res[namespace]) {\n        console.log('[Octoreactions] Getting from store: ', res[namespace][issueId])\n        return deferred.resolve(res[namespace][issueId])\n      }\n      return deferred.reject();\n    })\n\n    return deferred;\n  }\n\n  setReactionsToStore(owner, repo, issueId, reactions) {\n    const namespace = `${owner}:${repo}`;\n    let toStore = {};\n    toStore[namespace] = {};\n    toStore[namespace][issueId] = reactions;\n    this.storage.set(toStore)\n  }\n\n}\n","jQuery(document).ready(function ($) {\n\n  const GH_PJAX_CONTAINER_SEL = '#js-repo-pjax-container, .context-loader-container, [data-pjax-container]'\n\n  if (!window.octoreactions) {\n    window.octoreactions = new Octoreactions(null, chrome.storage);\n    window.octoreactions.updateState();\n    window.octoreactions.render();\n  }\n\n\n  // Setup observers\n  const pageChangeObserver = new window.MutationObserver(() => {\n    console.debug('[Octoreactions] Page Change');\n\n    window.octoreactions.updateState();\n    window.octoreactions.render();\n\n    // return $(document).trigger(EVENT.LOCATION_CHANGE);\n  })\n\n  const pjaxContainer = $(GH_PJAX_CONTAINER_SEL)[0]\n\n  if (pjaxContainer) pageChangeObserver.observe(pjaxContainer, {\n    childList: true,\n  })\n\n});"],"sourceRoot":"/source/"}